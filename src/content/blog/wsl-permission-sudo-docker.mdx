---
title: WSL 新手除錯全紀錄：權限、sudo 和 Docker 的那些事
description: test
pubDate: 2025-07-23
author: Blog 作者
tags: []
draft: false
---
### **【一切的開端：一個神秘的 `Permission denied`】**

今天一早，想說來跑一下我的 .NET 專案，結果馬上被一個紅色的錯誤訊息打臉：`Permission denied` (權限不足)。

**🤔 發生了什麼？**
看起來是我的程式在編譯時，想在 `obj` 資料夾裡寫一個暫存檔，但被系統拒絕了。就像我想在自己的筆記本上寫字，但筆記本卻說：「不，你不是我的主人，不准寫！」

**💡 學到的第一課：`sudo` 的詛咒**
經過一番探索，兇手很快就找到了：我之前八成是「貪圖方便」，對專案指令用了 `sudo`。這就導致專案裡的部分檔案和資料夾，主人變成了至高無上的 `root` 管理員。當我再用我自己的普通使用者帳號去執行 `dotnet build` 時，自然就被當成外人擋在門外。

- **解法：** 使用 `sudo chown -R $USER:$USER .` 指令，像個大法官一樣，把所有檔案的擁有權全部「物歸原主」。

### **【柳暗花明...又一村？：找不到專案檔】**

解決了權限問題後，我信心滿滿地再次執行 `dotnet build`，結果... 新的錯誤！`Specify a project or solution file`。好吧，至少這次不是權限問題了。

**💡 學到的第二課：你在哪，很重要**
原來是我待錯了目錄。`dotnet` 指令就像個搞不清楚狀況的工人，你得先把他帶到正確的工地（包含 `.sln` 或 `.csproj` 檔案的目錄），他才知道要蓋哪一棟房子。`cd` 進入專案目錄後，一切順利，`Build Succeeded` 的綠色訊息終於出現了！

### **【深入兔子洞：`sudo`、`docker` 與它們的秘密關係】**

這次的經驗讓我好奇：那我到底何時才該用 `sudo` 這把「天子之劍」？

**💡 學到的第三課：`sudo` 是手術刀，不是西瓜刀**`sudo` 只用在需要改變「整個系統」的事情上，例如：

- 安裝大家都能用的軟體 (`sudo apt install`)
- 修改系統設定檔 (`/etc` 裡的東西)
- 管理系統服務 (`sudo systemctl start`)

而所有在我家目錄 (`~/`) 裡的事情，都是我自己的事，完全不需要驚動 `sudo` 大駕。**最佳習慣是：先不用 `sudo` 試，如果系統跟你抱怨權限不足，再停下來思考原因。**

這時，又引出了 Docker 的特權問題。為什麼 `docker` 指令有時也要 `sudo`？

**💡 學到的第四課：Docker 是 C/S 架構的「老闆與員工」**
Docker 和 .NET 不一樣。Docker 背後有一個以 `root` 權限運行的超級大老闆 **Daemon (`dockerd`)**。我們平常用的 `docker` 指令只是個傳令兵。為了安全，不是誰都能跟老闆對話。

系統建立了一個 `docker` 群組，就像一張 VIP 名單。只要把我的使用者帳號加入這張名單 (`sudo usermod -aG docker $USER`)，我的傳令兵就能直接和 `root` 老闆溝通，再也不用每次都出示 `sudo` 令牌了。

### **【終極解密：我的開發環境原來長這樣！】**

這趟旅程的最後，我才終於搞懂了自己每天在用的環境到底是個什麼樣的「套娃」結構。

**💡 學到的第五課：我的高科技商業綜合體**
用一句話總結我現在的環境：

> 「我在 Windows 11 這片土地上，透過微軟提供的 WSL 2 這塊高科技地基，運行著 Ubuntu 這個設備齊全的工作室。而 Docker 則像個專業承包商，它自備了一個名為 docker-desktop 的標準機房，然後巧妙地和我的 Ubuntu 工作室對接，讓我能同時享受 Windows 的便利和 Linux 的強大。」
> 

所以，當我安裝 Docker Desktop 時，它不是非得裝在我的 Ubuntu 裡，而是聰明地建立了自己的小天地，再跟我合作。

**總結：**
今天從一個小小的權限錯誤開始，一路追查，最後竟然把整個 Windows + WSL + Ubuntu + Docker 的協作體系給摸透了。
